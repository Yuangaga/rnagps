library(precrec)
install.packages('precrec')
library(precrec)
predictions = read.table("/Users/kevin/Downloads/preds/txt")
predictions = read.table("/Users/kevin/Downloads/preds.txt")
View(predictions)
truths = read.table("/Users/kevin/Downloads/truths.txt")
evalmod(scores=predictions, labels=truths, mode='prcroc')
evalmod(scores=predictions[,1], labels=truths[,1], mode='prcroc')
evalmod(scores=predictions[,1], labels=truths[,1], mode='prcroc')$AUPRC
evalmod(scores=predictions[,1], labels=truths[,1], mode='prcroc')$AUCs
evalmod(scores=predictions[,1], labels=truths[,1], mode='prcroc')[['AUCs']]
aucs = evalmod(scores=predictions[,1], labels=truths[,1], mode='prcroc')
aucs
aucs.df =  as.data.frame(aucs)
View(aucs.df)
aucs.df$m1
library(knitr)
install.packages('knitr')
knitr::kabel(aucs.df)
library(knitr)
kable(aucs.df)
auc(aucs)
auc(aucs)$aucs
auc(aucs)$aucs[2]
print(i)
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
per_task_auprc(truths, predictions)
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
per_task_auprc(truths, predictions)
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
per_task_auprc(truths, predictions)
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
per_task_auprc(truths, predictions)
taskwise_auprc = per_task_auprc(truths, predictions)
mean(taskwise_auprc)
predictions = read.table("/Users/kevin/Downloads/preds.txt")
truths = read.table("/Users/kevin/Downloads/truths.txt")
install.packages('PRROC')
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
mean(per_task_auprc(truths, predictions))
mean(per_task_prroc_auprc(truths, predictions))
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
mean(per_task_prroc_auprc(truths, predictions))
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
mean(per_task_prroc_auprc(truths, predictions))
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
mean(per_task_prroc_auprc(truths, predictions))
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
mean(per_task_prroc_auprc(truths, predictions))
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
mean(per_task_prroc_auprc(truths, predictions))
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
mean(per_task_prroc_auprc(truths, predictions))
mean(per_task_precrec_auprc(truths, predictions))
preds_fake = c(0.8, 0.8, 0.8, 0.8, 0.25, 0.25, 0.25, 0.25)
truth_fake = c(1, 1, 1, 1, 0, 0, 0, 0)
mean(per_task_prroc_auprc(truth_fake, preds_fake))
pr.curve(scores.class0 = preds_fake, weights.class0 = truth_fake)
auc(evalmod(scores=preds_fake, labels=truth_fake))
preds_fake = rep(0.25, 2000)
truth_fake = c(rep(1, 200), rep(0, 1800))
pr.curve(scores.class0 = preds_fake, weights.class0 = truth_fake)
auc(evalmod(scores=preds_fake, labels=truth_fake))
epr_truths = read.table("~/Downloads/model.validation.truths.txt")
epr_preds = read.table("~/Downloads/model.validation.preds.txt")
per_task_precrec_auprc(epr_truths, epr_preds)
source('~/Documents/Stanford/kundaje/dynamo/misc/precrec_evaluation.R')
per_task_precrec_auprc(epr_truths, epr_preds)
mean(per_task_precrec_auprc(epr_truths, epr_preds))
median(per_task_precrec_auprc(epr_truths, epr_preds))
install.packages("h2o")
require('h2o')
localH2O = h2o.init(ip="localhost", port = 54321, startH2O = TRUE, nthreads = 1, max_mem_size = "1G")
DNN = h2o.loadModel("/Users/kevin/Downloads/DeepLncRNA")
require(devtools)
install.packages('devtools')
DNN = h2o.loadModel("/Users/kevin/Downloads/DeepLncRNA")
install_version("h2o", version = "3.18.0.11", repos = "http://cran.us.r-project.org")
require(devtools)
install_version("h2o", version = "3.18.0.11", repos = "http://cran.us.r-project.org")
DNN = h2o.loadModel("/Users/kevin/Downloads/DeepLncRNA")
require(h2o)
DNN = h2o.loadModel("/Users/kevin/Downloads/DeepLncRNA")
h20
h2o
require(h2o)
DNN = h2o.loadModel("/Users/kevin/Downloads/DeepLncRNA")
localH2O = h2o.init(ip="localhost", port = 54321, startH2O = TRUE, nthreads = 1, max_mem_size = "1G")
DNN = h2o.loadModel("/Users/kevin/Downloads/DeepLncRNA")
DNN
install.packages("Rtsne")
library("Rtsne")
scrna_matrix = read.matrix("/Users/kevin/Documents/Stanford/zou/single_cell_rep/commonspace_data/GSE117089/GSM3271040_RNA_sciCAR_A549_gene_count.txt.gz")
install.packages("Matrix")
library("Matrix")
scrna_matrix = readMM("/Users/kevin/Documents/Stanford/zou/single_cell_rep/commonspace_data/GSE117089/GSM3271040_RNA_sciCAR_A549_gene_count.txt.gz")
View(scrna_matrix)
scrna_matrix_full = scrna_matrix.coerce(from='dgTMatrix', to='matrix')
scrna_matrix_full = matrix(scrna_matrix)
View(scrna_matrix_full)
scrna_matrix_full.size
scrna_matrix_full.shape
shape(scrna_matrix_full)
dim(scrna_matrix_full)
dir()
file_path = '/Users/kevin/Documents/Stanford/zou/chang_rna_localization/rnafinder/data/encode/k562' # the directory where the files are found
# anno_file = '/home/krparker/user_data/stemrem201b/final/ref/human/Homo_sapiens.GRCh38.merge.gene_anno.txt.gz' # the name of the file containing the annotations
anno_file = '/Users/kevin/Documents/Stanford/zou/chang_rna_localization/rnafinder/data/Homo_sapiens.GRCh38.90.merge_transcriptome.fa.processed.txt'
# samples = c('RNA_WT_CM_rep1','RNA_WT_CM_rep2','RNA_WT_CM_rep3', 'RNA_DKO_CM_rep1','RNA_DKO_CM_rep2','RNA_DKO_CM_rep3') # the names of the samples (should be the names of the folders)
# sample_types = c('WT','WT','WT','DKO','DKO','DKO') # the sample types
files = Sys.glob(paste(file_path, "*.tsv.gz", sep="/"))
files
source('~/Documents/Stanford/zou/chang_rna_localization/rnafinder/data/encode/k562/deseq_simplified.R')
write.table(final, output_file, sep="\t")
final <- cbind(as.data.frame(res), counts_adj)
# save the output
counts_adj <- counts(dds, normalized=TRUE)
colnames(counts_adj) = paste(colnames(counts_adj), "counts_adj", sep="_")
final <- cbind(as.data.frame(res), counts_adj)
write.table(final, output_file, sep="\t")
source('~/Documents/Stanford/zou/chang_rna_localization/rnafinder/data/encode/k562/deseq_simplified.R')
